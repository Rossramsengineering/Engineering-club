<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Printed Octopus - Engineering Club Store</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anta:wght@400&family=Rubik:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    
    <link rel="stylesheet" href="../style.css">
    <link rel="icon" type="image/png" href="../Images/rossRams.png">

    <style>
        /* All base product page styles are unchanged... */
        .product-page-container {
            display: flex;
            gap: 2.5rem;
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1.5rem;
        }

        .product-image-gallery {
            flex: 1;
            max-width: 50%;
        }

        .product-image-gallery img {
            width: 100%;
            border-radius: 16px;
            background: var(--md-sys-color-surface-container);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: opacity 0.3s ease;
        }

        .product-details {
            flex: 1;
            padding-top: 1rem;
        }
        
        .product-details .product-category {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--md-sys-color-primary);
            text-transform: uppercase;
            margin-bottom: 0.5rem;
        }

        .product-details .product-title {
            font-size: 2.5rem;
            font-weight: 700;
            font-family: var(--font-heading);
            margin: 0 0 1rem 0;
            color: var(--md-sys-color-on-background);
        }

        .product-details .product-price {
            font-size: 2rem;
            font-weight: 500;
            color: var(--md-sys-color-primary);
            margin-bottom: 1.5rem;
        }

        .product-details .product-description {
            font-size: 1rem;
            line-height: 1.6;
            color: var(--md-sys-color-on-surface-variant);
            margin-bottom: 2rem;
        }
        
        .m3-button {
            font-family: var(--font-body);
            padding: 0.6rem 1.5rem;
            border-radius: 99px;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
            font-weight: 700;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            text-align: center;
        }
        
        .m3-button.outlined {
            border: 1px solid var(--md-sys-color-outline);
            background: transparent;
            color: var(--md-sys-color-primary);
        }
        .m3-button.outlined:hover {
            background: var(--md-sys-color-surface-variant);
        }

        .m3-button.filled {
            background-color: var(--md-sys-color-primary);
            color: var(--md-sys-color-on-primary);
        }

        .m3-button.filled:hover {
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .m3-button:disabled {
            background-color: var(--md-sys-color-surface-variant);
            color: var(--md-sys-color-on-surface-variant);
            cursor: not-allowed;
            box-shadow: none;
        }

        /* --- 
          ðŸ”»ðŸ”» NEW STYLES for Color Options ðŸ”»ðŸ”»
        --- */

        .product-options-label {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--md-sys-color-on-surface-variant);
            margin-bottom: 0.75rem;
        }

        .color-swatch-container {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 2rem;
        }
        
        .color-swatch-container input[type="radio"] {
            display: none; /* Hide the actual radio button */
        }

        /* This is the clickable color square */
        .color-swatch-container .color-swatch {
            width: 32px;
            height: 32px;
            border-radius: 50%; /* Make them circles */
            border: 2px solid var(--md-sys-color-outline-variant);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .color-swatch-container .color-swatch:hover {
            border-color: var(--md-sys-color-primary);
        }
        
        /* This is the style for the *selected* color */
        .color-swatch-container input[type="radio"]:checked + .color-swatch {
            border-color: var(--md-sys-color-primary);
            box-shadow: 0 0 0 3px var(--md-sys-color-primary);
        }

        /* Individual color styles */
        .color-swatch[data-color="Red"]    { background-color: #E63946; }
        .color-swatch[data-color="Blue"]   { background-color: #457B9D; }
        .color-swatch[data-color="Yellow"] { background-color: #FFD60A; }
        .color-swatch[data-color="Green"]  { background-color: #2A9D8F; }
        .color-swatch[data-color="Black"]  { background-color: #000000; }
        .color-swatch[data-color="White"]  { background-color: #F1FAEE; }
        
        /* --- ðŸ”ºðŸ”º END OF NEW STYLES ðŸ”ºðŸ”º --- */

        /* Inside the <style> block of octopus.html */

.color-swatch-container .color-swatch {
    display: block;  /* ðŸ”»ðŸ”» ADD THIS LINE ðŸ”»ðŸ”» */
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: 2px solid var(--md-sys-color-outline-variant);
    cursor: pointer;
    transition: all 0.2s ease;
}

        .product-details .m3-button.filled {
             width: 100%;
             justify-content: center;
        }

        @media (max-width: 768px) {
            .product-page-container {
                flex-direction: column;
            }
            .product-image-gallery {
                max-width: 100%;
            }
        }
        
    </style>

</head>

<body>
    <header class="header">
        <div class="logo">
            <img src="../Images/EngineeringClubFull.png" alt="Engineering Club Logo">
            <div class="header-divider"></div>
            <div class="page-title"></div>
        </div>
        <nav class="navigation">
            <a href="../cart.html" class="m3-button outlined" id="cart-button">
                <span class="material-symbols-outlined">shopping_cart</span>
                Cart
            </a>
        </nav>
    </header>

    <main class="content">
        <div class="product-page-container">
            
            <div class="product-image-gallery">
                <img src="../Images/product/octopus.png" alt="3D Printed Octopus" id="main-product-image">
            </div>

            <div class="product-details">
                <div class="product-category">3D Print</div>
                <h1 class="product-title">3D Printed Octopus</h1>
                <div class="product-price">$3.00</div>
                <p class="product-description">
                    A fun, articulated 3D printed octopus. Choose your color below!
                </p>
                
                <div class="product-options-label">Select a Color:</div>
                <div class="color-swatch-container">
                    <div>
                        <input type="radio" id="color-red" name="colorOption" value="Red">
                        <label for="color-red" class="color-swatch" data-color="Red" title="Red"></label>
                    </div>
                    <div>
                        <input type="radio" id="color-blue" name="colorOption" value="Blue">
                        <label for="color-blue" class="color-swatch" data-color="Blue" title="Blue"></label>
                    </div>
                    <div>
                        <input type="radio" id="color-yellow" name="colorOption" value="Yellow">
                        <label for="color-yellow" class="color-swatch" data-color="Yellow" title="Yellow"></label>
                    </div>
                    <div>
                        <input type="radio" id="color-green" name="colorOption" value="Green">
                        <label for="color-green" class="color-swatch" data-color="Green" title="Green"></label>
                    </div>
                    <div>
                        <input type="radio" id="color-black" name="colorOption" value="Black">
                        <label for="color-black" class="color-swatch" data-color="Black" title="Black"></label>
                    </div>
                    <div>
                        <input type="radio" id="color-white" name="colorOption" value="White">
                        <label for="color-white" class="color-swatch" data-color="White" title="White"></label>
                    </div>
                </div>

                <button class="m3-button filled" id="add-to-cart-btn" disabled>
                    <span class="material-symbols-outlined">add_shopping_cart</span>
                    Add to Cart
                </button>
                </div>

        </div>
    </main>

    <footer class="footer">
        <p class="m3-body-small">Engineering Club 2025</p>
    </footer>

    <script src="../components.js"></script>
    <script src="../theme.js"></script>
    <script src="../cart.js"></script> 
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Get all the elements we need
            const addToCartBtn = document.getElementById('add-to-cart-btn');
            const colorOptions = document.querySelectorAll('input[name="colorOption"]');
            const mainImage = document.getElementById('main-product-image');
            
            const baseImage = '../Images/product/octopus.png';
            
            // --- 1. Main function to check if Add to Cart should be enabled ---
            function validateForm() {
                const selectedOption = document.querySelector('input[name="colorOption"]:checked');
                
                if (selectedOption) {
                    addToCartBtn.disabled = false; // Enable button if a color is selected
                } else {
                    addToCartBtn.disabled = true; 
                }
            }

            // --- 2. Listen for changes on the radio buttons ---
            colorOptions.forEach(radio => {
                radio.addEventListener('change', () => {
                    // Update image preview (assuming you have images like octopus-red.png)
                    const color = radio.value.toLowerCase();
                    // This will try to find 'octopus-red.png', etc.
                    // If it fails, it will just show the alt text.
                    // For a real site, you'd have these images or a fallback.
                    mainImage.src = `../Images/product/octopus-${color}.png`;
                    
                    validateForm(); // Check if the form is valid
                });
            });

            // --- 3. Listen for the "Add to Cart" button click ---
            addToCartBtn.addEventListener('click', () => {
                const selectedOption = document.querySelector('input[name="colorOption"]:checked');
                
                if (!selectedOption) {
                    alert('Please select a color.');
                    return; 
                }

                const selectedValue = selectedOption.value;
                const selectedColorImage = `../Images/product/octopus-${selectedValue.toLowerCase()}.png`;

                // Add the item to the cart
                window.cartSystem.addItem({
                    id: `octopus-${selectedValue.toLowerCase()}`, // e.g., "octopus-red"
                    name: `3D Printed Octopus - ${selectedValue}`, // e.g., "3D Printed Octopus - Red"
                    price: 3.00,
                    image: selectedColorImage // Use the colored image for the cart
                });
                
                alert('Octopus added to cart!');
                resetForm(); // Reset after successful add
            });

            // --- 4. Helper function to reset the form ---
            function resetForm() {
                colorOptions.forEach(radio => radio.checked = false);
                addToCartBtn.disabled = true;
                mainImage.src = baseImage; // Reset main image
            }
        });
    </script>
    </body>

</html>